# Obsidian Widget Board Plugin

[note記事 Obsidianプラグイン「obsidian-widget-board-plugin」リリースしました](https://note.com/mekann/n/ne05f32922b9e?sub_rt=share_sb)
[obsidian-widget-board-plugin 導入方法を簡単にまとめる](https://note.com/mekann/n/n7c593c276d5b)

## 概要

Obsidian Widget Board Pluginは、Obsidian上で「ウィジェットボード」を作成し、複数の便利なウィジェット（ポモドーロタイマー、メモ、カレンダー、タイマー/ストップウォッチ、最近編集したノート、テーマ切り替え等）を自由に配置・管理できるプラグインです。

> **ウィジェットの自作・拡張方法については [WIDGET_DEV_GUIDE.md](WIDGET_DEV_GUIDE.md) もご参照ください。**
> **ポモドーロ作業ログのファイル形式については [logs/README.md](logs/README.md) もご参照ください。**

---

## 主な機能

- **ウィジェットボードの作成・複数管理**
    - 複数のボードを作成し、用途ごとにウィジェットを自由に追加・並べ替えできます。
    - ボードごとに表示モード（パネル幅）を選択可能。
- **ウィジェットの種類**
    - ポモドーロタイマー
    - メモ（Markdown対応）
    - カレンダー
    - タイマー/ストップウォッチ
    - 最近編集したノート一覧
    - テーマ切り替え
    - **つぶやき（tweet-widget）**
- **各ウィジェットは個別にタイトル・設定を持ち、ボード内で自由に並べ替え・削除が可能**
- **通知音や音量などの全体設定・個別設定**
- **ホットキー（トグルのみ）で各ボードを素早く開閉**
- **ポモドーロ作業ログの自動エクスポート（CSV/JSON/Markdown）**
- **独自ウィジェットの追加・開発も可能です。詳しくは [WIDGET_DEV_GUIDE.md](WIDGET_DEV_GUIDE.md) を参照してください。**

---

## 使い方

### 1. ボードの作成・管理
- 設定画面の「ボード管理」から新しいボードを追加できます。
- ボードごとにウィジェットを追加・並べ替え・削除できます。
- ボード名や初期表示モードも設定可能です。

### 2. ウィジェットの追加・編集
- ボード詳細設定内の「ウィジェット管理」から各種ウィジェットを追加できます。
- 追加したウィジェットはタイトル変更・並べ替え・削除が可能です。
- 各ウィジェットの詳細設定（例：ポモドーロの作業時間や通知音、メモ内容、カレンダーの表示など）も個別に編集できます。
- **追加できるウィジェットの種類は、プラグイン内で登録されたもの（`src/widgetRegistry.ts`参照）に限られます。新しいウィジェットを追加したい場合は、`widgetRegistry.ts`での登録とプラグインの再読み込みが必要です。**
- **独自ウィジェットの追加・開発方法については [WIDGET_DEV_GUIDE.md](WIDGET_DEV_GUIDE.md) をご覧ください。**

### 3. ホットキー
- 各ボードには「トグル」ホットキーのみ設定できます（Obsidianのホットキー設定画面から割り当て）。
- ボードを素早く開閉したい場合に便利です。

### 4. ポモドーロ作業ログのエクスポート
- ポモドーロタイマーのセッション終了時に、作業ログをCSV/JSON/Markdown形式で自動保存できます。
- 保存先はプラグインフォルダ内の`logs`サブフォルダ。
- エクスポート形式はウィジェットごとに設定可能です。
- CSVはBOM付き・エスケープ済み、Markdownは改行やテーブル崩れに配慮。
- **→ 各ログファイルの形式や活用法については [logs/README.md](logs/README.md) をご覧ください。**

---

## 各ウィジェットの特徴

### ● ポモドーロタイマー
- 作業・休憩・長い休憩のサイクルを管理。
- セッションごとに作業ログ（開始/終了時刻・メモ）を自動記録。
- メモ機能はウィジェット本体で編集可能。
- 通知音・音量の全体設定と個別設定。
- 作業ログはCSV/JSON/Markdown形式でエクスポート可能。

### ● メモ
- Markdown対応のメモウィジェット。
- 高さ自動調整・固定高さの切り替えが可能。
- ウィジェット内で直接編集・保存。

### ● カレンダー
- シンプルな月表示カレンダー。
- 前月・翌月の切り替えが可能。

### ● タイマー/ストップウォッチ
- タイマーとストップウォッチを切り替えて利用可能。
- タイマー終了時に通知音。
- 分・秒単位でタイマー設定。

### ● 最近編集したノート
- 最近編集したMarkdownノートを一覧表示。
- ノート名クリックで即座にノートを開けます。
- 表示件数は設定可能。

### ● テーマ切り替え
- Obsidianのテーマをワンクリックで切り替え。
- 現在のテーマが分かりやすく表示されます。

### ● つぶやき（tweet-widget）
- 投稿・スレッド・詳細表示ができる新ウィジェット
- 投稿欄（アバター・テキスト・画像/GIF添付・太字/斜体・絵文字・位置情報・文字数カウント・投稿ボタン）
- 投稿リストはスレッド（親子リプライ）構造で時系列表示
- 投稿クリックで「詳細表示モード」へ遷移し、親・自分・子リプライを分割表示
- 詳細表示時は上部にヘッダー、下部に返信欄を常時表示
- 返信ボタン押下時は画面中央にポップアップ（モーダル）で返信入力欄を表示
- 投稿の保存・編集・削除・いいね・リツイート・画像/GIF添付・太字/斜体・絵文字・位置情報・ブックマーク等多機能
- 投稿データは専用DBファイルで管理。Vault内のカスタムパスも指定可
- 投稿の非表示・完全削除・復元・フィルタ（すべて／通常／非表示／ブックマーク）機能
- ContextNote（関連ノート）作成・リンク機能
- UI/UX・デザインは他ウィジェットと統一感を重視
- レスポンシブ対応・アクセシビリティ向上

> **独自ウィジェットの追加・開発も可能です。詳しくは [WIDGET_DEV_GUIDE.md](WIDGET_DEV_GUIDE.md) を参照してください。**

---

## 設定・カスタマイズ

- 各ウィジェットの詳細設定は「ボード詳細設定」→「ウィジェット管理」から編集できます。
- 通知音や音量などの全体設定も用意。
- ポモドーロの作業ログエクスポート形式もここで選択可能。
- **ウィジェットごとの設定項目は、各ウィジェットの実装（`src/widgets/`配下）で定義されています。**

### つぶやきウィジェットの主な設定
- グローバル設定でDB保存先・カスタムパス・ユーザーアイコンURLを一括管理
- カスタムパスはVault内のフォルダのみサジェスト・選択可能
- 投稿欄・リスト両方でアバター画像のグローバル設定が反映
- サジェストやバリデーションでユーザーの誤操作を防止
- 投稿データは`deleted: true`で非表示フラグ管理。完全削除（物理削除）も可能
- 投稿リスト上部に「すべて」「通常のみ」「非表示のみ」「ブックマーク」フィルタUI
- 非表示ツイートには「復元」「完全削除」ボタン、通常ツイートには「非表示」「完全削除」ボタン
- ContextNoteはDBカスタムパスの下（例: myfolder/ContextNotes/）に生成
- 返信はモーダルUIで快適に入力可能

---

## 注意事項・その他

- ホットキーは「トグル」のみ設定できます（「開く」系は廃止）。
- ボードやウィジェットの追加・削除・名前変更は即時反映されます。
- ポモドーロの作業ログは重複排除なしで全件保存されます（必要に応じてコードで切り替え可能）。
- エクスポートファイルは`<Vault>/.obsidian/plugins/obsidian-widget-board-plugin/logs/`に保存されます。
- **ウィジェットの種類追加・削除は、`widgetRegistry.ts`の編集とプラグインの再読み込みが必要です。**

---

## 既知の問題

- ボード追加・削除・名前変更時、Obsidianの「ホットキー」画面のコマンド一覧はプラグインの再読み込み（Obsidian再起動またはプラグインの無効化→有効化）で反映されます。
- ボードやウィジェットの大量追加・削除を短時間で繰り返すと、UIの一部が正しく更新されない場合があります（その場合は設定画面を再度開き直してください）。
- ポモドーロの作業ログエクスポートはVault外のファイルや他プラグインとの競合には非対応です。
- Obsidianのバージョンやテーマによっては一部UIが崩れる場合があります。
- その他、細かな不具合やご要望はGitHub Issue等でご報告ください。
- **新しいウィジェットが追加候補に出ない場合は、`widgetRegistry.ts`での登録漏れやプラグインの再読み込みを確認してください。**

---

## インストール

Obsidian Widget Board Pluginの導入方法は主に2つあります。

### 1. GitHubリリースから手動インストール

1. [GitHubリリースページ](https://github.com/Mekann2904/obsidian-widget-board-plugin/releases)から`obsidian-widget-board-plugin.zip`をダウンロードします。
2. zipファイルを解凍し、Obsidianのプラグインフォルダ（`<Vault>/.obsidian/plugins/obsidian-widget-board-plugin/`）に移動させます。
3. Obsidianの設定画面から本プラグインを有効化してください。

### 2. BRATプラグインを使ってインストール（おすすめ）

BRAT（Beta Reviewers Auto-update Tool）プラグインを使うと、より簡単に導入・アップデートができます。

1. Obsidianのコミュニティプラグインから「BRAT」を検索・インストールします。
2. BRATの設定画面で「Add Beta Plugin」から本プラグインのGitHubリポジトリURL（ `https://github.com/Mekann2904/obsidian-widget-board-plugin`）を追加します。
3. 追加後、BRAT経由で本プラグインをインストール・有効化できます。

> **BRATを使う方法が最も簡単でおすすめです。アップデートも自動で反映されるはずです。**

---

## ライセンス

MIT
